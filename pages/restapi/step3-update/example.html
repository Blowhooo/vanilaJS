<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanilla JS - REST API UPDATE</title>
    <link rel="stylesheet" href="/src/styles/fonts.css">    
    <link rel="stylesheet" href="/src/styles/global.css">
    <link rel="stylesheet" href="/src/styles/layout.css">
    <link rel="stylesheet" href="/src/styles/components.css">
    <link rel="stylesheet" href="./styles/style.css">    
    <script src="/src/scripts/layout/header.js" defer></script>
    <script type="module" src="/src/scripts/utility/mentor/utiliExport.js" defer></script>
    <script src="./js/example.js" defer></script>
</head>
<body>
    <div id="container">
        <div id="wrapper">
            <header id="header" class="header">
                <div class="header__fix">
                    <div class="header__inner inner">
                        <h1 class="header__logo"><a href="/" class="header__link">JS</a></h1>
                        <a href="./page.html" class="btn btn--small">실습하기</a>                        
                    </div>
                </div>
            </header>
            <nav class="local-nav">
                <button type="button" class="local-nav__btn" aria-haspopup="true" aria-expanded="false" aria-controls="local-depth2">예시</button>
                <ul id="local-depth2" class="local-nav__list" hidden></ul>
            </nav>
            <main id="main" class="main">
                <div class="inner">
                    <div class="int-sec">
                        <h2 class="int-sec__tit">REST API - UPDATE(PUT/PATCH) 완전 정복</h2>
                        <p class="int-sec__desc">
                            JSON Server를 활용하여 데이터 수정(UPDATE)을 마스터해보자
                        </p>
                        <ul class="int-sec__list">
                            <li class="int-sec__desc int-sec__desc--item">PUT vs PATCH 메서드 이해하고 활용하기</li>
                            <li class="int-sec__desc int-sec__desc--item">기존 데이터 조회 후 수정하는 안전한 패턴</li>
                            <li class="int-sec__desc int-sec__desc--item">부분 업데이트와 전체 업데이트 구현</li>
                            <li class="int-sec__desc int-sec__desc--item"><span class="danger">실무적인 폼 관리와 변경 사항 추적</span></li>
                        </ul>
                    </div>
                    <div class="main__container">
                        
                        <!-- 1. 기본 게시글 수정 (PUT) -->
                        <section id="edu-1" class="main__sec" data-skip="기본 게시글 수정 (PUT)">
                            <div class="int-sec">
                                <h3 class="int-sec__st">1. 기본 게시글 수정 (PUT)</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">전체 리소스 교체 (PUT 메서드)</h4>
                                        <div class="form-row--column form-row--mb">
                                            <input type="number" id="put-post-id-1" class="frm-input frm-input--small" placeholder="수정할 게시글 ID" min="1">
                                            <input type="text" id="put-title-1" class="frm-input frm-input--small" placeholder="새 제목">
                                            <textarea id="put-body-1" class="frm-input frm-input--small" placeholder="새 내용" rows="3"></textarea>
                                            <input type="number" id="put-user-id-1" class="frm-input frm-input--small" placeholder="작성자 ID" min="1" max="10">
                                            <button type="button" class="btn btn--small" id="update-put-1">PUT으로 수정하기</button>
                                        </div>
                                        <div id="put-status-1" class="status status--hidden"></div>
                                        <div id="put-result-1" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 2. 부분 수정 (PATCH) -->
                        <section id="edu-2" class="main__sec" data-skip="부분 게시글 수정 (PATCH)">
                            <div class="int-sec">
                                <h3 class="int-sec__st">2. 부분 게시글 수정 (PATCH)</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">일부 필드만 수정 (PATCH 메서드)</h4>
                                        <div class="form-row--column form-row--mb">
                                            <input type="number" id="patch-post-id-1" class="frm-input frm-input--small" placeholder="수정할 게시글 ID" min="1">
                                            <label class="checkbox-label">
                                                <input type="checkbox" id="patch-title-check"> 제목 수정
                                            </label>
                                            <input type="text" id="patch-title-1" class="frm-input frm-input--small" placeholder="새 제목" disabled>
                                            <label class="checkbox-label">
                                                <input type="checkbox" id="patch-body-check"> 내용 수정
                                            </label>
                                            <textarea id="patch-body-1" class="frm-input frm-input--small" placeholder="새 내용" rows="3" disabled></textarea>
                                            <button type="button" class="btn btn--small" id="update-patch-1">PATCH로 부분 수정</button>
                                        </div>
                                        <div id="patch-status-1" class="status status--hidden"></div>
                                        <div id="patch-result-1" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 3. 기존 데이터 로드 후 수정 -->
                        <section id="edu-3" class="main__sec" data-skip="기존 데이터 로드 후 수정">
                            <div class="int-sec">
                                <h3 class="int-sec__st">3. 기존 데이터 로드 후 수정</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">GET으로 조회 → 폼에 데이터 로드 → 수정</h4>
                                        <div class="form-row--column form-row--mb">
                                            <div class="form-row">
                                                <input type="number" id="load-post-id" class="frm-input frm-input--small" placeholder="불러올 게시글 ID" min="1">
                                                <button type="button" class="btn btn--small" id="load-post-data">게시글 불러오기</button>
                                            </div>
                                            <div id="edit-form" class="edit-form" style="display: none;">
                                                <input type="text" id="edit-title" class="frm-input frm-input--small" placeholder="제목">
                                                <textarea id="edit-body" class="frm-input frm-input--small" placeholder="내용" rows="3"></textarea>
                                                <div class="form-buttons">
                                                    <button type="button" class="btn btn--small" id="save-changes">변경사항 저장</button>
                                                    <button type="button" class="btn btn--small" id="cancel-edit">취소</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="load-edit-status" class="status status--hidden"></div>
                                        <div id="load-edit-result" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 4. 변경사항 감지 및 확인 -->
                        <section id="edu-4" class="main__sec" data-skip="변경사항 감지 및 확인">
                            <div class="int-sec">
                                <h3 class="int-sec__st">4. 변경사항 감지 및 확인</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">수정 전후 데이터 비교 및 변경사항 하이라이트</h4>
                                        <div class="form-row--column form-row--mb">
                                            <div class="form-row">
                                                <input type="number" id="compare-post-id" class="frm-input frm-input--small" placeholder="게시글 ID" min="1">
                                                <button type="button" class="btn btn--small" id="load-for-compare">데이터 로드</button>
                                            </div>
                                            <div id="compare-form" class="compare-form" style="display: none;">
                                                <div class="compare-container">
                                                    <div class="original-data">
                                                        <h5>원본 데이터</h5>
                                                        <div id="original-content"></div>
                                                    </div>
                                                    <div class="edit-data">
                                                        <h5>수정할 데이터</h5>
                                                        <input type="text" id="compare-title" class="frm-input frm-input--small">
                                                        <textarea id="compare-body" class="frm-input frm-input--small" rows="3"></textarea>
                                                        <div class="changes-info">
                                                            <div id="changes-detected" class="changes-summary"></div>
                                                        </div>
                                                        <button type="button" class="btn btn--small" id="apply-changes">변경사항 적용</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="compare-status" class="status status--hidden"></div>
                                        <div id="compare-result" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 5. 낙관적 업데이트 (Optimistic Update) -->
                        <section id="edu-5" class="main__sec" data-skip="낙관적 업데이트">
                            <div class="int-sec">
                                <h3 class="int-sec__st">5. 낙관적 업데이트 (Optimistic Update)</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">UI 먼저 업데이트 → 서버 요청 → 실패시 롤백</h4>
                                        <div class="form-row--column form-row--mb">
                                            <div class="form-row">
                                                <input type="number" id="optimistic-post-id" class="frm-input frm-input--small" placeholder="게시글 ID" min="1">
                                                <button type="button" class="btn btn--small" id="load-optimistic">데이터 로드</button>
                                            </div>
                                            <div id="optimistic-display" class="optimistic-display"></div>
                                            <div id="optimistic-edit" class="optimistic-edit" style="display: none;">
                                                <input type="text" id="optimistic-title" class="frm-input frm-input--small">
                                                <textarea id="optimistic-body" class="frm-input frm-input--small" rows="3"></textarea>
                                                <div class="form-buttons">
                                                    <button type="button" class="btn btn--small" id="optimistic-save">즉시 저장 (낙관적)</button>
                                                    <button type="button" class="btn btn--small" id="optimistic-save-error">저장 실패 시뮬레이션</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="optimistic-status" class="status status--hidden"></div>
                                        <div id="optimistic-result" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 6. 여러 게시글 일괄 수정 -->
                        <section id="edu-6" class="main__sec" data-skip="여러 게시글 일괄 수정">
                            <div class="int-sec">
                                <h3 class="int-sec__st">6. 여러 게시글 일괄 수정</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">선택된 게시글들의 특정 필드를 한번에 수정</h4>
                                        <div class="form-row--column form-row--mb">
                                            <button type="button" class="btn btn--small" id="load-posts-for-batch">게시글 목록 불러오기</button>
                                            <div id="batch-posts-list" class="batch-posts-list"></div>
                                            <div id="batch-edit-controls" class="batch-edit-controls" style="display: none;">
                                                <h5>일괄 수정 옵션</h5>
                                                <div class="batch-options">
                                                    <label class="checkbox-label">
                                                        <input type="checkbox" id="batch-title-update"> 제목 수정
                                                    </label>
                                                    <input type="text" id="batch-new-title" class="frm-input frm-input--small" placeholder="새 제목 (선택된 모든 게시글)" disabled>
                                                    <label class="checkbox-label">
                                                        <input type="checkbox" id="batch-body-prefix"> 내용 앞에 텍스트 추가
                                                    </label>
                                                    <input type="text" id="batch-body-prefix-text" class="frm-input frm-input--small" placeholder="추가할 텍스트" disabled>
                                                </div>
                                                <button type="button" class="btn btn--small" id="apply-batch-update" disabled>일괄 수정 적용</button>
                                            </div>
                                        </div>
                                        <div id="batch-status" class="status status--hidden"></div>
                                        <div id="batch-result" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 7. 실시간 폼 검증 및 미리보기 -->
                        <section id="edu-7" class="main__sec" data-skip="실시간 폼 검증 및 미리보기">
                            <div class="int-sec">
                                <h3 class="int-sec__st">7. 실시간 폼 검증 및 미리보기</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">입력하는 동안 실시간 검증 및 변경사항 미리보기</h4>
                                        <div class="form-row--column form-row--mb">
                                            <div class="form-row">
                                                <input type="number" id="preview-post-id" class="frm-input frm-input--small" placeholder="게시글 ID" min="1">
                                                <button type="button" class="btn btn--small" id="load-for-preview">로드</button>
                                            </div>
                                            <div id="preview-container" class="preview-container" style="display: none;">
                                                <div class="preview-edit">
                                                    <h5>편집</h5>
                                                    <input type="text" id="preview-title" class="frm-input frm-input--small">
                                                    <textarea id="preview-body" class="frm-input frm-input--small" rows="4"></textarea>
                                                    <div class="validation-info">
                                                        <div id="title-validation" class="validation-message"></div>
                                                        <div id="body-validation" class="validation-message"></div>
                                                        <div id="char-count" class="char-count"></div>
                                                    </div>
                                                    <button type="button" class="btn btn--small" id="save-preview" disabled>저장</button>
                                                </div>
                                                <div class="preview-display">
                                                    <h5>미리보기</h5>
                                                    <div id="preview-content" class="preview-content">
                                                        <div class="preview-title"></div>
                                                        <div class="preview-body"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="preview-status" class="status status--hidden"></div>
                                        <div id="preview-result" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 8. 버전 관리 및 히스토리 -->
                        <section id="edu-8" class="main__sec" data-skip="버전 관리 및 히스토리">
                            <div class="int-sec">
                                <h3 class="int-sec__st">8. 버전 관리 및 히스토리</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">수정 이력 관리 및 이전 버전으로 되돌리기</h4>
                                        <div class="form-row--column form-row--mb">
                                            <div class="form-row">
                                                <input type="number" id="history-post-id" class="frm-input frm-input--small" placeholder="게시글 ID" min="1">
                                                <button type="button" class="btn btn--small" id="load-with-history">히스토리 포함 로드</button>
                                            </div>
                                            <div id="history-container" class="history-container" style="display: none;">
                                                <div class="edit-section">
                                                    <h5>현재 버전 편집</h5>
                                                    <input type="text" id="history-title" class="frm-input frm-input--small">
                                                    <textarea id="history-body" class="frm-input frm-input--small" rows="3"></textarea>
                                                    <button type="button" class="btn btn--small" id="save-with-history">저장 (히스토리 기록)</button>
                                                </div>
                                                <div class="history-section">
                                                    <h5>수정 히스토리</h5>
                                                    <div id="version-history" class="version-history"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="history-status" class="status status--hidden"></div>
                                        <div id="history-result" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 9. 에러 처리 및 재시도 -->
                        <section id="edu-9" class="main__sec" data-skip="에러 처리 및 재시도">
                            <div class="int-sec">
                                <h3 class="int-sec__st">9. 다양한 UPDATE 에러 상황 처리</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">충돌 감지, 네트워크 오류, 권한 오류 등</h4>
                                        <div class="form-row--column form-row--mb">
                                            <button type="button" class="btn btn--small" id="test-conflict-error">409 충돌 에러 시뮬레이션</button>
                                            <button type="button" class="btn btn--small" id="test-permission-error">403 권한 에러 시뮬레이션</button>
                                            <button type="button" class="btn btn--small" id="test-network-retry">네트워크 재시도 시뮬레이션</button>
                                            <button type="button" class="btn btn--small" id="test-stale-data">오래된 데이터 수정 시도</button>
                                        </div>
                                        <div id="error-handling-status" class="status status--hidden"></div>
                                        <div id="error-handling-result" class="test__area"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                        <!-- 10. 종합 실습 - 고급 게시글 편집기 -->
                        <section id="edu-10" class="main__sec" data-skip="종합 실습 - 고급 게시글 편집기">
                            <div class="int-sec">
                                <h3 class="int-sec__st">10. 종합 실습 - 고급 게시글 편집기</h3>
                                <div class="test">
                                    <section class="test__sec">
                                        <h4 class="test__sbj">모든 UPDATE 기능이 통합된 완전한 편집기</h4>
                                        <div class="advanced-editor">
                                            <div class="editor-header">
                                                <h5>고급 게시글 편집기</h5>
                                                <div class="editor-controls">
                                                    <input type="number" id="editor-post-id" class="frm-input frm-input--small" placeholder="게시글 ID" min="1">
                                                    <button type="button" class="btn btn--small" id="editor-load">불러오기</button>
                                                    <button type="button" class="btn btn--small" id="editor-new">새 게시글</button>
                                                </div>
                                            </div>
                                            
                                            <div id="advanced-editor-form" class="advanced-editor-form" style="display: none;">
                                                <div class="editor-toolbar">
                                                    <button type="button" class="btn btn--small" id="editor-save">저장</button>
                                                    <button type="button" class="btn btn--small" id="editor-save-draft">임시저장</button>
                                                    <button type="button" class="btn btn--small" id="editor-preview">미리보기</button>
                                                    <button type="button" class="btn btn--small" id="editor-history">히스토리</button>
                                                    <span class="save-status" id="editor-save-status">저장됨</span>
                                                </div>
                                                
                                                <div class="editor-content">
                                                    <input type="text" id="editor-title" class="frm-input frm-input--full" placeholder="게시글 제목">
                                                    <textarea id="editor-body" class="frm-input frm-input--full editor-textarea" placeholder="게시글 내용을 입력하세요..." rows="10"></textarea>
                                                    
                                                    <div class="editor-footer">
                                                        <div class="editor-info">
                                                            <span>글자 수: <span id="editor-char-count">0</span></span>
                                                            <span>|</span>
                                                            <span>마지막 저장: <span id="editor-last-saved">없음</span></span>
                                                        </div>
                                                        <div class="editor-actions">
                                                            <label class="checkbox-label">
                                                                <input type="checkbox" id="editor-auto-save"> 자동 저장
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div id="editor-preview-modal" class="editor-modal" style="display: none;">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5>미리보기</h5>
                                                        <button type="button" class="btn btn--small" id="close-preview">닫기</button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div id="editor-preview-content"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="advanced-editor-status" class="status status--hidden"></div>
                                    </section>
                                </div>
                            </div>
                        </section>

                    </div>
                </div>
            </main>
            <footer id="footer" class="footer">
                <div class="inner">
                    <p class="foote__cprt">Vanilla JavaScript</p>
                </div>
            </footer>
        </div>
    </div>
</body>
</html>
